<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui" xmlns:of="http://omnifaces.org/functions"
      xmlns:o="http://omnifaces.org/ui" xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <body>
        <ui:composition>
            <c:choose>
                <c:when test="#{displayMode=='new'}">
                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="nameLbl" value="Name : " for="nameTxt" styleClass="txtLbl"/>
                        </span>
                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:inputText id="nameTxt" required="true" autocomplete="off" size="30"
                                         value="#{productPageBean.product.name}"/>
                            <p:message for="nameTxt" display="icon" style="float:right;"/>
                        </span>
                    </div>

                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="priceLbl" value="Price : " for="priceTxt" styleClass="txtLbl"/>
                        </span>
                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:inputText id="priceTxt" required="true" autocomplete="off" size="25"
                                         value="#{productPageBean.product.price}" converter="javax.faces.Double"
                                         converterMessage="Please enter positive values only"/>
                            <p:message for="priceTxt" display="icon" style="float:right;"/>
                        </span>
                    </div>

                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="categoryLbl" value="Category : " for="selCategory" styleClass="txtLbl"/>
                        </span>
                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:selectOneMenu id="selCategory" required="true" converter="omnifaces.SelectItemsConverter"
                                             value="#{productPageBean.categoryId}">
                                <f:selectItems value="#{productPageBean.allCategories}" var="category" itemLabel="#{category.categoryName}" 
                                               itemValue="#{category.categoryId}"/>
                            </p:selectOneMenu>
                            <p:message for="selCategory" display="icon" style="float:right;"/>
                        </span>
                    </div>

                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="colourLbl" value="Colour : " for="selColour" styleClass="txtLbl"/>
                        </span>

                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:selectOneMenu id="selColour" value="#{productPageBean.product.productColour}" required="true">
                                <f:selectItems value="#{globalBean.colours}"/>
                            </p:selectOneMenu>
                            <p:message for="selColour" display="icon" style="float:right;"/> 
                        </span>
                    </div>


                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="quantityLbl" value="Quantity : " for="quantityTxt" styleClass="txtLbl"/>
                        </span>
                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:inputText id="quantityTxt" required="true" autocomplete="off" size="10" 
                                         converterMessage="Please enter positive digits only."  
                                         validatorMessage="Quantity can be between 1 to 20"
                                         value="#{productPageBean.productQnty}" >
                                <f:converter converterId="javax.faces.Integer"/>
                                <f:validateLongRange minimum="1" maximum="20" />
                            </p:inputText>
                            <p:watermark for="quantityTxt" value="Up to a maximum of 20" id="watermark" />
                            <p:message for="quantityTxt" display="icon" style="float:right;"/>
                        </span>
                    </div>

                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="typeLbl" value="Type : " for="selType" styleClass="txtLbl"/>
                        </span>
                    </div>
                    <div class="ui-g-4">
                        <span style="margin-left:3px;">
                            <p:selectOneRadio id="selType" value="#{productPageBean.product.productType}" required="true">
                                <f:selectItems value="#{globalBean.productType}"/>
                            </p:selectOneRadio>
                            <p:message for="selType" display="icon" style="float:right;"/> 
                        </span>
                    </div> 

                    <div class="ui-g-2">
                        <span style="margin-left:3px;">
                            <p:outputLabel id="descriptionLbl" value="Description : " for="descriptionTxt" styleClass="txtLbl"/>
                        </span>

                    </div>
                    <div class="ui-g-10">
                        <span style="margin-left:3px;">
                            <p:inputTextarea id="descriptionTxt" cols="40" required="true" rows="5" value="#{productPageBean.product.description}"/>
                        </span>
                        <p:message for="descriptionTxt" display="icon" style="float:right;"/> 
                    </div>

                </c:when>
                <c:when test="#{displayMode=='view'}">
                    <table class="addTableBorders" width="100%" cellpadding ="5" cellspacing="5">
                        <tr>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Name : "  styleClass="pageLabel"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.name}" styleClass="pageText"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Code : "  styleClass="pageLabel"/>
                                </span>
                            </td>  
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.productCode}" styleClass="pageText"/>
                                </span>
                            </td>  
                        </tr>

                        <tr>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Category : "  styleClass="pageLabel"/>
                                </span>
                            </td>  
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.category.categoryName}" styleClass="pageText"/>
                                </span>
                            </td> 
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Price : "  styleClass="pageLabel"/>
                                </span>
                            </td>  
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.price}" styleClass="pageText"/>
                                </span>
                            </td>  
                        </tr>
                        
                        <tr>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Colour : "  styleClass="pageLabel"/>
                                </span>  
                            </td>  
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.productColour}" styleClass="pageText"/>
                                </span>  
                            </td>  
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Type : "  styleClass="pageLabel"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.productType}" styleClass="pageText"/>
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Status : "  styleClass="pageLabel"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <h:outputText value="#{productPageBean.product.status}" styleClass="pageText"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:outputLabel  value="Description : "  styleClass="pageLabel"/>
                                </span>
                            </td>
                            <td>
                                <span style="margin-left:3px;">
                                    <p:inputTextarea value="#{productPageBean.product.description}" readonly="true" cols="40" rows="6"/>
                                </span>
                            </td>
                        </tr>
                    </table>




                </c:when>
                <c:when test="#{displayMode=='list'}">
                    <p:dataTable id="productsTable" var="aProduct" value="#{productPageBean.allProducts}" 
                                 paginatorPosition="bottom" paginator="true" rows="20" rowIndexVar="rowIndex"
                                 paginatorTemplate=" {CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">

                        <p:column headerText="No" style="text-align: center;width: 30px;">
                            <h:outputText value="#{rowIndex+1}"/>
                        </p:column>

                        <p:column headerText=" Name " style="text-align: left;">
                            <h:outputText value="#{aProduct.name}"/>
                        </p:column>

                        <p:column headerText=" Code " style="text-align: center;">
                            <h:outputText value="#{productPageBean.capitalize(aProduct.productCode)}"/>
                        </p:column>

                        <p:column headerText=" Price " style="text-align: left;">
                            <h:outputText value="#{aProduct.price}"/>
                        </p:column>

                        <p:column headerText=" Category " style="text-align: left;">
                            <h:outputText value="#{aProduct.category.categoryName}"/>
                        </p:column>

                        <p:column headerText=" Status " style="text-align: left;">
                            <h:outputText value="#{productPageBean.capitalize(aProduct.status)}"/>
                        </p:column>

                        <p:column headerText="Create Date" style="text-align: center;">
                            <h:outputText value="#{of:formatDate(aProduct.createDate,pageResource.DISPLAY_DATE_FORMAT_DAYS)}"/>
                        </p:column>

                        <p:column headerText="Actions" style="text-align: center;width: 60px;">
                            <p:commandButton update="@form" icon="view-icon"
                                             action="#{productPageBean.setPageResource(pageResource.VIEW_PRODUCT,aProduct)}"
                                             title="View Product" class="img-button"/>

                            <span class="horizontalSeparator">|</span>

                            <p:commandButton update="@form" oncomplete="PF('deleteProductConfirmPopup').show()"
                                             icon="#{(productPageBean.isAvailable(aProduct)) ? 'delete-icon' : 'delete-disabled-icon'}" 
                                             disabled="#{!productPageBean.isAvailable(aProduct)}"
                                             title="Delete Product" class="img-button">
                                <f:setPropertyActionListener value="#{aProduct}" target="#{productPageBean.product}"/>
                                <f:setPropertyActionListener value="#{aProduct.category.categoryId}" target="#{productPageBean.categoryId}"/>
                            </p:commandButton>
                        </p:column>

                    </p:dataTable>
                </c:when>
            </c:choose>
        </ui:composition>
    </body>
</html>
